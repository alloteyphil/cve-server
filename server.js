import express from "express";
import cors from "cors";
import cookieParser from "cookie-parser";
import { connectToDb } from "./mongo/index.js";
import router from "./routes/cve.routes.js";

// Express setup
const app = express();
const port = 8080;

//enable cors
app.use(cors());

// Parse cookies
app.use(cookieParser());

//parse json
app.use(express.json());

//route
app.use("/api", router);

// Start the server

connectToDb().then(() => {
  app.listen(port, () => {
    console.log(`Server running at ${port}`);
  });
});
